{% extends "core/base.html" %}
{% block title %}Gate Entry{% endblock %}
{% block content %}
<h2>Simulate Gate Entry (UC2)</h2>

<div class="btn-group mb-3" role="group">
  <a href="{% url 'contracts:gate_entry' %}" class="btn btn-primary">
    Entry
  </a>
  <a href="{% url 'contracts:gate_exit' %}" class="btn btn-outline-primary">
    Exit
  </a>
</div>
<form method="post" class="mt-3">
  {% csrf_token %}
  <div class="mb-3">
    <label class="form-label">License plate</label>
    <input type="text" name="license_plate" class="form-control">
  </div>

  <div class="mb-3">
    <label class="form-label">Gate</label>
    <select name="gate_id" class="form-select">
      {% for g in gates %}
      <option value="{{ g.id }}">{{ g.area.name }} / {{ g.name }}</option>
      {% endfor %}
    </select>
  </div>

  <button type="submit" class="btn btn-primary">Simulate entry</button>
</form>

{% if result is not None %}
  {% if result.success %}
    <div class="alert alert-success mt-3">
      Gate opened. {{ result.reason }}
    </div>
  {% else %}
    <div class="alert alert-danger mt-3">
      Gate closed. {{ result.reason }}
    </div>
  {% endif %}
{% endif %}
{% endblock %}
